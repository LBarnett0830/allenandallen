<aura:component controller="trustActivityController"  implements="force:lightningQuickAction,force:hasRecordId,force:appHostable,flexipage:availableForAllPageTypes"  >
    <!-- this component is used in Trust Actvity Quick Action/ Button in Matter 
    developed by Sampath Suranji-->
    <aura:html tag="style">
        .slds-modal__container{
        /*height : auto;*/
        width: 90%;
        max-width: 1500px;
        }
        .slds-modal__header{
        background: #337AB7 !important; color: #fff;
        }
        .modal-body{
        height : 100% !important;
        max-height: 600px !important;
        overflow:hidden;
        }
         .slds-modal__content{
        height : auto !important;
        max-height: unset !important;
        }
        .slds-modal__footer{
        display: none;
        }
        .confirmation{
        display: block;
        }
        
        .tblTH{
        padding-left: 7px !important;
        }
        .tblBody{
        height:300px;
        }
        /* Extra small devices (phones, 600px and down) */
        @media only screen and (max-width: 600px) {
        .tblBody{
        height:320px;
        }
        }
        
        /* Small devices (portrait tablets and large phones, 600px and up) */
        @media only screen and (min-width: 600px) {
        .tblBody{
        height:350px;
        }
        }
        
        /* Medium devices (landscape tablets, 768px and up) */
        @media only screen and (min-width: 768px) {
        .tblBody{
        height:370px;
        }
        }
        
        /* Large devices (laptops/desktops, 992px and up) */
        @media only screen and (min-width: 992px) {
        .tblBody{
        height:420px;
        }
        }
        @media only screen and (min-width: 2200px) {
        .tblBody{
        height:520px;
        }
        .modal-body{
        height : 100% !important;
        max-height: 700px !important;
        overflow:hidden;
        }
        }
    </aura:html> 
    
    <aura:attribute name="matterWrapper" type="matterTrustActivityWrapper"/>
    <aura:attribute name="recordUrlBase" type="String"/>
    <aura:attribute name="recordUrlBaseEnd" type="String"/>
    <aura:attribute name="showSpinner" type="boolean"/>
    <aura:attribute name="sortBy" type="string"/>
    <aura:attribute name="dateDesc" type="boolean" />
    <aura:attribute name="amountDesc" type="boolean" />
    <aura:attribute name="partyDesc" type="boolean" />
    <aura:attribute name="trustCodeDesc" type="boolean" />
    
    <aura:handler name="init" value="{!this}" action="{!c.init}"/>
    
    <div class="slds-grid slds-wrap" id="mainDiv">
        <div class="slds-col slds-large-size_1-of-1">  
            
            <div>
                <div class="slds-grid slds-wrap">
                    <div class="slds-col slds-size--1-of-1 slds-small-size--1-of-2 slds-medium-size--1-of-3">
                        <div class="slds-form-element">
                            <label class="slds-form-element__label" for="form-element-01" style="font-weight:bold;">Matter Name</label>
                            <div class="slds-form-element__control">
                                {!v.matterWrapper.objMatter.Name}
                            </div>
                            <div class="slds-form-element__control" style="font-weight:bold;">
                                {!v.matterWrapper.objMatter.litify_pm__Display_Name__c}
                            </div>
                        </div>
                    </div>
                    <div class="slds-col slds-size--1-of-1 slds-small-size--1-of-2 slds-medium-size--1-of-3">
                        <div class="slds-form-element">
                            <label class="slds-form-element__label" for="form-element-01" style="font-weight:bold;">Current Balance</label>
                            <div class="slds-form-element__control">
                                <ui:outputCurrency value="{!v.matterWrapper.balanceAmount}"></ui:outputCurrency>
                            </div>
                            <div class="slds-form-element__control" style="font-weight:bold;">
                                
                            </div>
                        </div>
                    </div>
                    
                </div>
            </div>
            
            <div style="margin-top:20px;">
                
                <div class="slds-page-header">
                    <div class="slds-page-header__row">
                        <div class="slds-page-header__col-title">
                            <div class="slds-media">
                                <div class="slds-media__figure">
                                    
                                </div>
                                <div class="slds-media__body">
                                    <div class="slds-page-header__name">
                                        <div class="slds-page-header__name-title">
                                            <h1>
                                                <span class="slds-page-header__title slds-truncate">Trust Activities</span>
                                            </h1>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="slds-table--header-fixed_container tblBody" >
                    <div class="slds-scrollable_y" style="height:100%;">
                        
                        <table aria-multiselectable="true" class="slds-table slds-table_bordered slds-table--header-fixed" role="grid" style="table-layout: fixed">
                            <thead>
                                <tr class="slds-line-height_reset" >
                                    
                                    <!--<th class="slds-text-align_right " scope="col" style="width:30px; padding-right:5px">
                                        
                                        
                                    </th>-->
                                    
                                    <th class="tblTH" scope="col" style="width:10%" >
                                        
                                        <div class="slds-truncate slds-cell-fixed">
                                            <span class="slds-truncate" title="Name"> Id</span>
                                            
                                        </div>
                                        
                                    </th>
                                    
                                    <th class="tblTH" scope="col" style="width:10%" >
                                        <a onclick="{!c.sortByDate}">
                                            <div class="slds-truncate slds-cell-fixed">
                                                <span class="slds-truncate" title="Name">Date</span>
                                                <span>
                                                    <aura:if isTrue="{!v.dateDesc}"><lightning:icon iconName="utility:arrowup"  size="xx-small" alternativeText="Indicates approval"/>
                                                        <aura:set attribute="else">
                                                            <lightning:icon iconName="utility:arrowdown"  size="xx-small" alternativeText="Indicates approval"/>
                                                        </aura:set>
                                                    </aura:if>
                                                </span>
                                            </div>
                                        </a>
                                    </th>
                                    <th class="tblTH" scope="col" style="width:10%"  >
                                        <a onclick="{!c.sortByAmount}">
                                            <div class="slds-truncate slds-cell-fixed">
                                                <span class="slds-truncate" title="Name">Amount</span>
                                                <span>
                                                    <aura:if isTrue="{!v.amountDesc}"><lightning:icon iconName="utility:arrowup"  size="xx-small" alternativeText="Indicates approval"/>
                                                        <aura:set attribute="else">
                                                            <lightning:icon iconName="utility:arrowdown"  size="xx-small" alternativeText="Indicates approval"/>
                                                        </aura:set>
                                                    </aura:if>
                                                </span>
                                            </div>
                                        </a>
                                    </th>
                                    <th class="tblTH" scope="col"  style="width:10%"  >
                                        <div class="slds-truncate slds-cell-fixed">
                                                <span class="slds-truncate" title="Name">Date Paid</span>
                                               
                                            </div>
                                            
                                       
                                    </th>
                                    <th class="tblTH" scope="col"   style="width:10%" >
                                        <div class="slds-truncate slds-cell-fixed">
                                                <span class="slds-truncate" title="Name">Check #</span>
                                               
                                            </div>
                                            
                                       
                                    </th>
                                    <th class="tblTH" scope="col" style="width:20%"  >
                                        <a onclick="{!c.sortByParty}">
                                            <div class="slds-truncate slds-cell-fixed">
                                                <span class="slds-truncate" title="Name">Party</span>
                                                <span>
                                                    <aura:if isTrue="{!v.partyDesc}"><lightning:icon iconName="utility:arrowup"  size="xx-small" alternativeText="Indicates approval"/>
                                                        <aura:set attribute="else">
                                                            <lightning:icon iconName="utility:arrowdown"  size="xx-small" alternativeText="Indicates approval"/>
                                                        </aura:set>
                                                    </aura:if>
                                                </span>
                                            </div>
                                            
                                        </a>
                                    </th>
                                    
                                    <th class="tblTH" scope="col"  style="width:20%" >
                                        <div class="slds-truncate slds-cell-fixed">
                                                <span class="slds-truncate" title="Name">Reference</span>
                                               
                                            </div>
                                            
                                       
                                    </th>
                                    <th class="tblTH" scope="col" style="width:10%"  >
                                        <a onclick="{!c.sortByTrustCode}">
                                            <div class="slds-truncate slds-cell-fixed">
                                                <span class="slds-truncate" title="Name">Trust Code</span>
                                                <span>
                                                    <aura:if isTrue="{!v.trustCodeDesc}"><lightning:icon iconName="utility:arrowup"  size="xx-small" alternativeText="Indicates approval"/>
                                                        <aura:set attribute="else">
                                                            <lightning:icon iconName="utility:arrowdown"  size="xx-small" alternativeText="Indicates approval"/>
                                                        </aura:set>
                                                    </aura:if>
                                                </span>
                                            </div>
                                        </a>
                                    </th>
                                    
                                </tr>
                            </thead>
                            <tbody>
                                <aura:iteration items="{!v.matterWrapper.trustActDetailList}" var="activity">
                                    <tr aria-selected="false" class="slds-hint-parent">
                                        
                                       <!-- <td class="slds-text-align_right" role="gridcell">
                                        </td>-->
                                        <th scope="gridcell"  style="width:10%">
                                            <div class="slds-truncate" title="Name">
                                                <a href="{!v.recordUrlBase+ activity.Id + v.recordUrlBaseEnd}" tabindex="0" target="_blank">{!activity.transactioName}</a>
                                                
                                            </div>
                                        </th>
                                        
                                        <td role="gridcell"  style="width:10%">
                                            <div class="slds-truncate" title="Date">
                                                <ui:outputDate value="{!activity.transactioDate}" format="MM/dd/YYYY"/>
                                            </div> 
                                        </td>
                                        <td role="gridcell"  style="width:10%">
                                            <div class="slds-truncate" title="Amount" >
                                                <ui:outputCurrency value="{!activity.amount}"/>
                                            </div>
                                        </td>
                                        <td role="gridcell" style="width:10%">
                                            <div class="slds-truncate" title="Date"><ui:outputDate value="{!activity.cdTransactioDate}" format="MM/dd/YYYY"/></div>
                                        </td>
                                        <td role="gridcell" style="width:10%">
                                            <div class="slds-truncate" title="Check No">{!activity.checkNo}</div>
                                        </td>
                                        <td role="gridcell" style="width:20%">
                                            <div class="slds-truncate" title="party">
                                                <a href="{!v.recordUrlBase+ activity.accountId + v.recordUrlBaseEnd}" tabindex="0" target="_blank">{!activity.accountName}</a>
                                                
                                            </div>
                                        </td>
                                        
                                         <td role="gridcell" style="width:20%">
                                            <div class="slds-truncate" title="trustCode">{!activity.reference}</div>
                                        </td>
                                        <td role="gridcell"  style="width:10%">
                                            <div class="slds-truncate" title="trustCode">{!activity.trustCode}</div>
                                        </td>
                                        
                                        
                                    </tr>
                                </aura:iteration>
                                
                            </tbody>
                            
                        </table>
                    </div>
                </div>
            </div>
            
        </div>
        
        <aura:if isTrue="{!v.showSpinner}">
            <div id="divLoading" >
                <div class="demo-only demo-only demo-only_viewport demo--inverse" style="height:6rem">
                    <div class="slds-spinner_container slds-is-fixed">
                        <div role="status" class="slds-spinner slds-spinner_medium">
                            <span class="slds-assistive-text">Loading</span>
                            <div class="slds-spinner__dot-a"></div>
                            <div class="slds-spinner__dot-b"></div>
                        </div>
                    </div>
                </div>
            </div>
        </aura:if>
    </div>
    
</aura:component>